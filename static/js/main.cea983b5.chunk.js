(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,a){e.exports=a(410)},142:function(e,t,a){},406:function(e,t,a){e.exports=a.p+"static/media/arrows.52a3cfaf.svg"},407:function(e,t,a){e.exports=a.p+"static/media/drink.e34d2bca.svg"},408:function(e,t,a){e.exports=a.p+"static/media/clock.62b80d77.svg"},409:function(e,t,a){e.exports=a.p+"static/media/titleinv.a0ddbe69.png"},410:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(26),o=a.n(r),l=(a(142),a(11)),i=a(12),c=a(14),h=a(13),u=a(15),d=a(79),p=a.n(d),m=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).updateKerberos=function(e){a.setState({kerberos:e.target.value})},a.updateGender=function(e){a.setState({gender:e.target.value})},a.updateWeight=function(e){a.setState({weight:e.target.value})},a.submitForm=function(e){e.preventDefault(),p.a.post("/api/account",{kerberos:a.state.kerberos,gender:a.state.gender,weight:a.state.weight}).then(function(e){a.props.onLogin(e.data)}).then(function(e){console.log(e)})},a.state={kerberos:"",gender:"M",weight:150},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"login-container"},s.a.createElement("h1",null,"Login"),s.a.createElement("form",{onSubmit:this.submitForm},s.a.createElement("h4",null,"Kerberos"),s.a.createElement("input",{type:"text",placeholder:"kerberos",value:this.state.kerberos,onChange:this.updateKerberos}),s.a.createElement("br",null),s.a.createElement("h4",null,"Gender"),s.a.createElement("select",{value:this.state.gender,onChange:this.updateGender},s.a.createElement("option",{value:"M"},"male"),s.a.createElement("option",{value:"F"},"female")),s.a.createElement("br",null),s.a.createElement("h4",null,"Weight (lbs)"),s.a.createElement("input",{type:"number",value:this.state.weight,onChange:this.updateWeight}),s.a.createElement("br",null),s.a.createElement("h4",null),s.a.createElement("input",{type:"submit",value:"Login"})))}}]),t}(n.Component),g=a(7),f=a(6),v=a.n(f),E=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).state={fastNow:v()().unix()},a.updateFastNow=function(){a.setState({fastNow:v()().unix()})},a.getTimeText=function(e){var t=Math.floor(e/60),a=Math.floor(e/3600);return(e%=60)<10&&(e="0"+e),(t%=60)<10&&(t="0"+t),a>0?"".concat(a,":").concat(t,":").concat(e):"".concat(t,":").concat(e)},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fastClockInterval=setInterval(this.updateFastNow,1e3)}},{key:"render",value:function(){var e=Math.round(1e3*this.props.currBac)/1e3,t=v.a.unix(this.props.soberTime).format("hh:mm a"),a="";if(this.props.active&&this.props.schedule.length>0){var n=this.props.schedule[0];a=this.state.fastNow<n?this.getTimeText(n-this.state.fastNow):"NOW!"}return s.a.createElement("div",null,s.a.createElement("h2",null,"your predicted BAC"),s.a.createElement("h5",null,"current ",s.a.createElement("strong",null,e)," | sober ",s.a.createElement("strong",null,t),this.props.active?" | drink ":""," ",s.a.createElement("strong",{className:"drink-in-text"},a)))}}]),t}(n.Component),b=a(83),y=14,k=8/60/60,w=.006,C=120;function x(e){var t=null;switch(e){case"0":t=y/10/60;break;case"1":t=y/20/60;break;case"2":t=y/30/60;break;default:t=y/20/60}return t}function N(e,t,a,n,s,r){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,l=e-S(t[1],n,s),i=(10+50*o)*l+.04*(a+=l)+(-.03-.05*o)*t[0];return[Math.max(i,0),a]}function O(e,t,a,n,s){var r=a<=0?0:k,o=Math.max(Math.min(w*t,n),0),l=-o*s+e,i=(o-r)*s;return[t=Math.max(t+l,0),a=Math.max(a+i,0)]}function S(e,t,a){return.01*e/(("M"===t?75:65)*a/2.2/1e3)}function j(e,t,a,n,s,r,o,l,i,c){for(var h=x(r),u=[],d=[],p=0,m=[e,t],g=0,f=-1,v=0,E=0,b=o;b<i;b+=c){for(g=0;p<a.length&&b>=a[p];)g+=y,p+=1;var k=S(m[1],n,s);E=k-v,v=k,f<0&&0==a.length?f=l:f<0&&b>l&&v<.01&&E<0&&(f=b),u.push(b),d.push(v),m=O(g,m[0],m[1],h,c)}if(f<0){f=i;for(var w=[m[0],m[1]];!((v=S((w=O(0,w[0],w[1],h,c))[1],n,s))<.01);)f+=c}return[u,d,m,f]}var M=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).state={now:v()().unix()},a.updateNow=function(){a.setState({now:v()().unix()})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.clockInterval=setInterval(this.updateNow,6e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.clockInterval)}},{key:"render",value:function(){var e=this.state.now-1200;this.props.history.length>0&&(e=this.props.history[0]-1200),e=1800*Math.floor(e/30/60);for(var t=this.state.now+60*this.props.scheduleHours*60,a=[],n=e;n<t;n+=1800)a.push(n);for(var r=[],o=-1,l=j(0,0,this.props.history,this.props.gender,this.props.weight,this.props.food,e,this.state.now,t,60),i=j(0,0,this.props.history.concat(this.props.schedule),this.props.gender,this.props.weight,this.props.food,e,this.state.now,t,60),c=function(e,t,a,n,s,r,o,l,i,c,h,u){var d=l+C;a.length>0&&(d=a[a.length-1]+C);for(var p=j(e,t,a,n,s,r,o,l,d,c),m=p[0],g=p[1],f=p[2],v=0,E=x(r),y=[],k=0,w=d;w<i;w+=c){var M=N(h,f,k,n,s,c,u),W=Object(b.a)(M,2);v=W[0],k=W[1],y.push(v),m.push(w),g.push(S(f[1],n,s)),f=O(v,f[0],f[1],E,c)}return[m,g,f]}(0,0,this.props.history,this.props.gender,this.props.weight,this.props.food,e,this.state.now,t,60,this.props.goal,this.props.alpha),h=l[0],u=l[1],d=l[3],p=(i[0],i[1]),m=(c[0],c[1]),f=0,y=0,k=0;k<h.length;k++){var w=h[k],M={x:h[k],goal:this.props.goal},W=!1;w<this.state.now?M.past=u[k]:(W||(M.past=u[k],W=!0),M.future=u[k]);var A=this.props.history.length>0?this.props.history[this.props.history.length-1]:this.state.now;for(this.props.active&&w>=A&&(M.control=p[k],M.idealControl=m[k]),w>this.state.now&&w-this.state.now<60&&(M["current-dot"]=u[k],o=u[k]);f<this.props.history.length&&this.props.history[f]-w<60;)M["history-dots"]=u[k],f++;for(;this.props.active&&y<this.props.schedule.length&&w-this.props.schedule[y]>60;)M["control-dots"]=p[k],y++;r.push(M)}return s.a.createElement("div",{className:"graph-container"},s.a.createElement(E,{fastNow:this.state.fastNow,active:this.props.active,schedule:this.props.schedule,currBac:o,soberTime:d}),s.a.createElement(g.d,{height:"90%"},s.a.createElement(g.c,{data:r,margin:{top:20,right:10,bottom:20,left:10}},s.a.createElement(g.a,null),s.a.createElement(g.e,{type:"number",domain:[e,t],dataKey:"x",name:"time",tickFormatter:function(e){return v.a.unix(e).format("hh:mm a")},ticks:a}),s.a.createElement(g.f,null),s.a.createElement(g.b,{name:"goal",dataKey:"goal",stroke:"#ffffff",strokeWidth:4,dot:!1}),s.a.createElement(g.b,{name:"idealControl",dataKey:"idealControl",stroke:"#58ff49",strokeWidth:5,dot:!1}),s.a.createElement(g.b,{name:"control",dataKey:"control",stroke:"#ff6600",strokeWidth:5,dot:!1}),s.a.createElement(g.b,{name:"past",dataKey:"past",stroke:"#00665D",strokeWidth:5,dot:!1}),s.a.createElement(g.b,{name:"future",dataKey:"future",stroke:"#6ae5db",strokeWidth:5,dot:!1}),s.a.createElement(g.b,{name:"history-dots",dataKey:"history-dots",dot:{stroke:"#00665D",strokeWidth:12},isAnimationActive:!1}),s.a.createElement(g.b,{name:"control-dots",dataKey:"control-dots",dot:{stroke:"#ff6600",strokeWidth:12},isAnimationActive:!1}),s.a.createElement(g.b,{name:"current-dot",dataKey:"current-dot",dot:{stroke:"#6ae5db",strokeWidth:7},isAnimationActive:!1}))))}}]),t}(n.Component),W=a(21),A=a.n(W),H=a(51),D=a.n(H),K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).state={expanded:!1},a.toggleScheduleView=function(){a.setState({expanded:!a.state.expanded})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=s.a.createElement("div",null,s.a.createElement("div",{className:"timelist"},s.a.createElement("p",null,s.a.createElement("strong",null,"scheduled drinks")),s.a.createElement("ul",{className:"dropdown-ul"},this.props.schedule.map(function(e,t){return s.a.createElement("li",{key:t},v.a.unix(e).format("hh:mm a"))}))),s.a.createElement("div",{className:"sliders"},s.a.createElement("p",null,s.a.createElement("strong",null,"goal BAC:")," ",Math.round(100*this.props.goal)/100),s.a.createElement(D.a,{value:this.props.goal,min:.04,max:.3,step:.02,"aria-labelledby":"label",onChange:this.props.handleGoalChange}),s.a.createElement("p",null,s.a.createElement("strong",null,"aggressiveness:")," ",Math.round(10*this.props.alpha)/10),s.a.createElement(D.a,{value:this.props.alpha,min:0,max:1,step:.1,"aria-labelledby":"label",onChange:this.props.handleAlphaChange})));return s.a.createElement("div",null,s.a.createElement("div",{className:"expand-container"},s.a.createElement(A.a,{className:"mdc-button",onClick:this.toggleScheduleView},s.a.createElement("p",{className:"button-text"},this.state.expanded?"hide details":"show details"),s.a.createElement("img",{className:this.state.expanded?"arrow arrow-up":"arrow",src:a(406)}))),s.a.createElement("div",{className:this.state.expanded?"sched-expanded":"sched-closed"},s.a.createElement("div",{className:"user-details"},s.a.createElement("p",null,s.a.createElement("strong",null,"about you")),s.a.createElement("select",{value:this.props.gender,onChange:this.props.handleGenderChange},s.a.createElement("option",{value:"M"},"male"),s.a.createElement("option",{value:"F"},"female")),s.a.createElement("label",null,"weight",s.a.createElement("input",{type:"number",step:"10",min:"80",max:"400",value:this.props.weight,onChange:this.props.handleWeightChange})),s.a.createElement("select",{value:this.props.food,onChange:this.props.handleFoodChange},s.a.createElement("option",{value:"0"},"no food"),s.a.createElement("option",{value:"1"},"some food"),s.a.createElement("option",{value:"2"},"lots of food"))),s.a.createElement("div",{className:"timelist"},s.a.createElement("p",null,s.a.createElement("strong",null,"history")),s.a.createElement("ul",{className:"dropdown-ul"},this.props.history.map(function(e,t){return s.a.createElement("li",{key:t},v.a.unix(e).format("hh:mm a"))})),s.a.createElement(A.a,{className:"mdc-button",onClick:this.props.deleteOneHistory},s.a.createElement("p",{className:"danger-text"},"delete last drink")),s.a.createElement(A.a,{className:"mdc-button",onClick:this.props.resetHistory},s.a.createElement("p",{className:"danger-text"},"delete all"))),this.props.active?e:s.a.createElement("div",null)))}}]),t}(n.Component),F=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(h.a)(t).call(this,e))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){clearInterval(this.clockInterval)}},{key:"render",value:function(){var e=s.a.createElement(A.a,{variant:"contained",className:"drink-button",onClick:this.props.addDrink},s.a.createElement("p",{className:"bold-text margin-zero"},"Add Drink"),s.a.createElement("img",{className:"drink-img",src:a(407)})),t=s.a.createElement(A.a,{variant:"contained",className:"sched-button",onClick:this.props.active?this.props.resetSchedule:this.props.resume},s.a.createElement("p",{className:"bold-text margin-zero"},this.props.active?"stop":"start"),s.a.createElement("img",{className:"clock-img",src:a(408)}));return s.a.createElement("div",{className:"drink-container"},e," ",t,s.a.createElement("br",null))}}]),t}(n.Component),G=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).state={weight:150,gender:"M",food:"1",history:[],schedule:[],scheduleHours:6,active:!0,goal:.1,alpha:.5,secret:!0,kerberos:null},a.addDrink=function(){var e=a.state.history,t=v()().unix();e.push(t),e.sort(),a.setState({history:e,schedule:a.calcSchedule(e,a.state.goal,a.state.alpha,a.state.gender,a.state.weight,a.state.food)})},a.resume=function(){a.setState({active:!0,schedule:a.calcSchedule(a.state.history,a.state.goal,a.state.alpha,a.state.gender,a.state.weight,a.state.food)})},a.calcSchedule=function(e,t,n,s,r,o){var l=v()().unix();return function(e,t,a,n,s,r,o,l,i,c,h,u){var d=l+C;a.length>0&&(d=a[a.length-1]+C);for(var p=j(e,t,a,n,s,r,o,l,d,c)[2],m=0,g=x(r),f=[l],v=0,E=0,k=d;k<i+3600;k+=c){var w=N(h,p,E,n,s,c,u),S=Object(b.a)(w,2);m=S[0],E=S[1],(v+=m)>=y&&(f.push(Math.floor(.58*k+.42*f[f.length-1])),v-=y),p=O(m,p[0],p[1],g,c)}return f.slice(1)}(0,0,e,s,r,o,e.length>0?e[0]:l,l,l+60*a.state.scheduleHours*60,60,t,n)},a.handleGenderChange=function(e){a.setState({gender:e.target.value,schedule:a.calcSchedule(a.state.history,a.state.goal,a.state.alpha,e.target.value,a.state.weight,a.state.food)})},a.handleFoodChange=function(e){a.setState({food:e.target.value,schedule:a.calcSchedule(a.state.history,a.state.goal,a.state.alpha,a.state.gender,a.state.weight,e.target.value)})},a.handleWeightChange=function(e){e.target.value<=0?a.setState({weight:1}):a.setState({weight:e.target.value,schedule:a.calcSchedule(a.state.history,a.state.goal,a.state.alpha,a.state.gender,e.target.value,a.state.food)})},a.handleGoalChange=function(e,t){a.setState({goal:t,schedule:a.calcSchedule(a.state.history,t,a.state.alpha,a.state.gender,a.state.weight,a.state.food)})},a.handleAlphaChange=function(e,t){a.setState({alpha:t,schedule:a.calcSchedule(a.state.history,a.state.goal,t,a.state.gender,a.state.weight,a.state.food)})},a.deleteOneHistory=function(){if(a.state.history.length>0){var e=a.state.history.slice(0,a.state.history.length-1);a.setState({history:e,schedule:a.calcSchedule(e,a.state.goal,a.state.alpha,a.state.gender,a.state.weight,a.state.food)})}},a.resetSchedule=function(){a.setState({active:!1,schedule:[]})},a.resetHistory=function(){a.setState({history:[],schedule:a.calcSchedule([],a.state.goal,a.state.alpha,a.state.gender,a.state.weight,a.state.food)})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({schedule:this.calcSchedule(this.state.history,this.state.goal,this.state.alpha,this.state.gender,this.state.weight,this.state.food)})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",{className:"view"},s.a.createElement("div",{className:"logo-container"},s.a.createElement("img",{className:"logo",alt:"logo",src:a(409)})),this.state.secret?s.a.createElement("div",null,s.a.createElement(K,{active:this.state.active,goal:this.state.goal,alpha:this.state.alpha,gender:this.state.gender,weight:this.state.weight,food:this.state.food,handleGoalChange:this.handleGoalChange,handleAlphaChange:this.handleAlphaChange,handleGenderChange:this.handleGenderChange,handleWeightChange:this.handleWeightChange,handleFoodChange:this.handleFoodChange,history:this.state.history,schedule:this.state.schedule,resetHistory:this.resetHistory,deleteOneHistory:this.deleteOneHistory}),s.a.createElement(M,{history:this.state.history,schedule:this.state.schedule,scheduleHours:this.state.scheduleHours,active:this.state.active,goal:this.state.goal,alpha:this.state.alpha,gender:this.state.gender,weight:this.state.weight,food:this.state.food}),s.a.createElement(F,{active:this.state.active,addDrink:this.addDrink,resume:this.resume,resetSchedule:this.resetSchedule,schedule:this.state.schedule}),s.a.createElement("br",null),s.a.createElement("br",null)):s.a.createElement(m,{onLogin:this.onLogin}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[137,2,1]]]);
//# sourceMappingURL=main.cea983b5.chunk.js.map